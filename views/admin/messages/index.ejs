<!-- Messages Dashboard Minimal -->
<div class="container-fluid px-0">
  <div class="mb-4">
    <div class="row g-3">
      <div class="col-12 col-md-4">
        <div class="bg-white border rounded-3 p-3 h-100">
          <div class="fw-bold fs-4 mb-1"><%= messages.length %></div>
          <div class="text-muted small">Total Messages</div>
        </div>
      </div>
      <div class="col-12 col-md-4">
        <div class="bg-white border rounded-3 p-3 h-100">
          <div class="fw-bold fs-4 mb-1"><%= messages.filter(m => !m.isRead).length %></div>
          <div class="text-muted small">Unread Messages</div>
        </div>
      </div>
      <div class="col-12 col-md-4">
        <div class="bg-white border rounded-3 p-3 h-100">
          <div class="fw-bold fs-4 mb-1"><%= messages.filter(m => m.isRead).length %></div>
          <div class="text-muted small">Read Messages</div>
        </div>
      </div>
    </div>
  </div>

      <!-- Minimal Filter Bar -->
      <div class="bg-white border rounded-3 p-3 mb-4">
        <form class="row g-2 align-items-end flex-wrap" method="get" action="">
          <div class="col-12 col-md-3">
            <label for="filterStatus" class="form-label mb-1">Status</label>
            <select class="form-select" id="filterStatus" name="status">
              <option value="">All</option>
              <option value="unread">Unread</option>
              <option value="read">Read</option>
            </select>
          </div>
          <div class="col-12 col-md-4">
            <label for="filterEmail" class="form-label mb-1">Email</label>
            <input type="text" class="form-control" id="filterEmail" name="email" placeholder="Search email">
          </div>
          <div class="col-12 col-md-5 d-flex align-items-end gap-2 mt-2 mt-md-0">
            <button type="submit" class="btn btn-primary px-4"><i class="bi bi-search"></i> Filter</button>
            <a href="/admin/messages" class="btn btn-outline-secondary">Reset</a>
          </div>
        </form>
      </div>
      <% if (messages.length === 0) { %>
        <div class="text-center py-5">
          <i class="bi bi-chat-heart fs-1 mb-3 d-block" style="color: var(--admin-primary); opacity: 0.5;"></i>
          <h4 class="mb-2" style="color: var(--admin-text);">No Messages Yet</h4>
          <p class="text-muted mb-4">You haven't received any messages from visitors yet. Once someone contacts you through the website, their messages will appear here!</p>
          <a href="/" target="_blank" class="btn btn-admin-outline">
            <i class="bi bi-eye me-1"></i>View Contact Page
          </a>
        </div>
      <% } else { %>
        <div class="table-responsive p-0">
          <table class="table table-hover mb-0 bg-white border rounded-3">
            <thead class="table-light">
              <tr>
                <th scope="col" style="min-width: 150px;">From</th>
                <th scope="col" class="d-none d-md-table-cell" style="min-width: 200px;">Email</th>
                <th scope="col" style="min-width: 180px;">Subject</th>
                <th scope="col" class="d-none d-lg-table-cell" style="min-width: 120px;">Date</th>
                <th scope="col" style="min-width: 100px;">Status</th>
                <th scope="col" style="min-width: 120px;">Actions</th>
              </tr>
            </thead>
            <tbody>
              <% messages.forEach(function(message) { %>
                <tr class="<%= message.isRead ? '' : 'fw-bold' %>">
                  <td>
                    <div class="d-flex align-items-center">
                      <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-2" 
                           style="width: 35px; height: 35px; font-size: 14px; font-weight: bold;">
                        <%= message.name.charAt(0).toUpperCase() %>
                      </div>
                      <div>
                        <div class="fw-medium"><%= message.name %></div>
                        <div class="text-muted small d-md-none"><%= message.email %></div>
                      </div>
                    </div>
                  </td>
                  <td class="d-none d-md-table-cell">
                    <a href="mailto:<%= message.email %>" class="text-decoration-none">
                      <%= message.email %>
                    </a>
                  </td>
                  <td>
                    <div class="text-truncate" style="max-width: 200px;" title="<%= message.subject || 'No Subject' %>">
                      <% if (!message.isRead) { %>
                        <i class="bi bi-envelope-fill text-primary me-1"></i>
                      <% } else { %>
                        <i class="bi bi-envelope-open text-muted me-1"></i>
                      <% } %>
                      <%= message.subject || 'No Subject' %>
                    </div>
                    <div class="text-muted small d-lg-none">
                      <%= new Date(message.createdAt).toLocaleDateString() %>
                    </div>
                  </td>
                  <td class="d-none d-lg-table-cell">
                    <small class="text-muted">
                      <%= new Date(message.createdAt).toLocaleDateString() %>
                    </small>
                  </td>
                  <td>
                    <% if (message.isRead) { %>
                      <span class="badge bg-success">Read</span>
                    <% } else { %>
                      <span class="badge bg-warning">Unread</span>
                    <% } %>
                  </td>
                  <td>
                    <div class="d-flex align-items-center gap-2">
                      <a href="/admin/messages/<%= message._id %>" 
                         class="btn btn-outline-primary btn-sm px-2 py-1" 
                         title="View Message">
                        <i class="bi bi-eye"></i>
                      </a>
                      <form action="/admin/messages/<%= message._id %>/toggle-read" method="POST" class="d-inline">
                        <button type="submit" 
                                class="btn btn-outline-secondary btn-sm px-2 py-1" 
                                title="<%= message.isRead ? 'Mark as Unread' : 'Mark as Read' %>">
                          <i class="bi bi-<%= message.isRead ? 'envelope' : 'envelope-open' %>"></i>
                        </button>
                      </form>
                      <a href="/admin/messages/<%= message._id %>/delete" 
                         class="btn btn-outline-danger btn-sm px-2 py-1" 
                         title="Delete Message">
                        <i class="bi bi-trash"></i>
                      </a>
                    </div>
                  </td>
                </tr>
              <% }); %>
            </tbody>
          </table>
        </div>
      <% } %>
  </div>
</div>