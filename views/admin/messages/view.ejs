<!-- Message View Card -->
<div class="dashboard-card">
  <div class="dashboard-card-header">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h5 class="mb-0">
          <i class="bi bi-chat-heart-fill me-2"></i>
          Message Details
        </h5>
      </div>
      <div>
        <a href="/admin/messages" class="btn btn-admin-outline btn-sm">
          <i class="bi bi-arrow-left me-1"></i> Back to Messages
        </a>
      </div>
    </div>
  </div>
  
  <div class="dashboard-card-body">
    <!-- Message Header Info -->
    <div class="message-header mb-4">
      <div class="row align-items-center">
        <div class="col-md-8">
          <div class="d-flex align-items-center">
            <div class="message-avatar me-3">
              <%= message.name.charAt(0).toUpperCase() %>
            </div>
            <div>
              <h6 class="message-name mb-1"><%= message.name %></h6>
              <a href="mailto:<%= message.email %>" class="email-link">
                <i class="bi bi-envelope me-1"></i><%= message.email %>
              </a>
            </div>
          </div>
        </div>
        <div class="col-md-4 text-md-end">
          <div class="mb-2">
            <span class="message-status <%= message.isRead ? 'read' : 'unread' %>">
              <%= message.isRead ? 'Read' : 'Unread' %>
            </span>
          </div>
          <small class="message-date">
            <i class="bi bi-clock me-1"></i>
            <%= new Date(message.createdAt).toLocaleString() %>
          </small>
        </div>
      </div>
    </div>
    
    <!-- Message Content -->
    <div class="message-content mb-4">
      <% if (message.subject) { %>
        <div class="message-subject-section mb-3">
          <label class="form-label fw-bold">
            <i class="bi bi-tag me-1"></i>Subject:
          </label>
          <div class="message-subject"><%= message.subject %></div>
        </div>
      <% } %>
      
      <div class="message-body-section">
        <label class="form-label fw-bold">
          <i class="bi bi-chat-text me-1"></i>Message:
        </label>
        <div class="message-body p-3">
          <%= message.message %>
        </div>
      </div>
    </div>
    
    <!-- Action Buttons -->
    <div class="message-actions">
      <div class="d-flex justify-content-between align-items-center flex-wrap">
        <div class="action-buttons">
          <form action="/admin/messages/<%= message._id %>/toggle-read" method="POST" class="d-inline me-2">
            <button type="submit" class="btn btn-admin-outline">
              <i class="bi bi-<%= message.isRead ? 'eye-slash' : 'eye' %> me-1"></i>
              <%= message.isRead ? 'Mark as Unread' : 'Mark as Read' %>
            </button>
          </form>
          
          <form action="/admin/messages/<%= message._id %>/delete" method="POST" class="d-inline"
                onsubmit="return confirm('Are you sure you want to delete this message? This action cannot be undone.');">
            <button type="submit" class="btn btn-admin-danger">
              <i class="bi bi-trash me-1"></i>Delete Message
            </button>
          </form>
        </div>
        
        <div class="reply-action">
          <a href="mailto:<%= message.email %>?subject=Re: <%= message.subject || 'Your message' %>&body=Hi <%= message.name %>,%0D%0A%0D%0A" 
             class="btn btn-admin-primary">
            <i class="bi bi-reply me-1"></i>Reply via Email
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

